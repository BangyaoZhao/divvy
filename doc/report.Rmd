---
title: "report"
author: "Bangyao Zhao, Xuemei Ding, Sunyi Chi"
date: "2019/12/8"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```
Variable name    | Variable label
-----------------|---------------
trip_id          | trip ID
tripduration     | end_time - start_time, in minutes.
Age              | age of user
from_station_name| name of the station where the trip starts. There are 620 different stations.                              
usertype         | user type. Can be either subscriber (Annual Members) or customer (users who bought single ride or one-day pass)
Gender           | gender of the user
Season           | in which season the trip took place.
Start_time_cat   | in which time slot of a day the trip took place
weekends| indicator of whether the trip happens on weekends

## Linear Model

Linear regression is an approach to identify linear relationship between a response and explanatory variables. We use linear regression to start an exploratory research so as to identify significant predictors. 

$$tripduration=X\beta+\varepsilon,\ \varepsilon\sim N(0,\sigma^2)$$

### Memory issue

Our design matrix $X$ is of dimension $1490516\times 653$ due to the presence of categorical variables, which is too large to fit the matrix in the memory. When fitting the model, we were not able to fit the model by `lm()` function. We solve this problem by using the bigmemory package.

After successfully fitting the model, we looked at the residual plot

### Constant Variance issue

Let's have a look at the residuals:

```
res <- readRDS("../results/res.rds")
plot(res)
```

As we can see, the constant variance assumption seems violated in the model, so we decided to use transformation to fix the problem, we finally chose the square root function. 

### Results
```
library(bigmemory)
library(biganalytics)
res1 <- readRDS("../results/res1.rds")
summary(res1)
```
As we can see, even after fixing the transformation, the $R^2=0.0432$ is still unsatisfactory, which means linear model may not be a perfect fit for this problem, so we decide to switch to other advanced non-parametric machine learning models. 


## R Markdown

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this:

```{r cars}
summary(cars)
```

## Including Plots

You can also embed plots, for example:

```{r pressure, echo=FALSE}
plot(pressure)
```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.
